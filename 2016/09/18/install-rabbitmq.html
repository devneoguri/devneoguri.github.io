<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="icon" type="image/icon" href="/favicon.ico">
    
    <title>RabbitMQ ì„¤ì¹˜ ë° í´ëŸ¬ìŠ¤í„° êµ¬ì„±</title>
    
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
<header>
    <div id="nav_container">
        <nav>
            <a href="/">Dev. Neoguri</a>
        </nav>
    </div>
</header>
<section id="main">
    <article>
    <div class="heading">RabbitMQ ì„¤ì¹˜ ë° í´ëŸ¬ìŠ¤í„° êµ¬ì„±</div>
    <p class="meta">ğŸ—“ 18 Sep 2016</p>
    <div class="content">
    <p>CentOS7 ê¸°ì¤€ìœ¼ë¡œ ìµœì‹  rpm íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë°›ì•„ì„œ ì„¤ì¹˜í•œë‹¤.
(<a href="https://www.rabbitmq.com/install-rpm.html">https://www.rabbitmq.com/install-rpm.html</a>)</p>

<p>rabbitmq serverë¥¼ ì‹¤í–‰í•œë‹¤.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server1$ </span>systemctl start rabbitmq-server
</code></pre>
</div>

<p>1ë²ˆ ì„œë²„ì—ì„œ erlang ì¿ í‚¤ ê°’ì„ ë³µì‚¬í•˜ì—¬ ë‹¤ë¥¸ ì„œë²„ë“¤ì— ì ìš©í•œë‹¤.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server1$ </span>cat /var/lib/rabbitmq/.erlang.cookie
<span class="c">#cookie_value#</span>
</code></pre>
</div>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server2$ </span>vi /var/lib/rabbitmq/.erlang.cookie
</code></pre>
</div>
<p>cookieíŒŒì¼ í¼ë¯¸ì…˜ì´ 500ì¸ì§€ í™•ì¸í•˜ê³  ì†Œìœ ìë¥¼ rabbitmqë¡œ ë§ì¶°ì¤€ë‹¤.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server2$ </span>chmod 500 /var/lib/rabbitmq/.erlang.cookie
<span class="gp">mq-server2$ </span>chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie
</code></pre>
</div>
<p>ì „ì²´ ì„œë²„ì—ì„œ /etc/hostsì— ì„œë¡œ í˜¸ìŠ¤íŠ¸ëª…ì„ ì„¤ì • í•´ì£¼ê³  1ë²ˆì„œë²„ì˜ í´ëŸ¬ìŠ¤í„°ì— ì¡°ì¸í•œë‹¤.
join_cluster ëª…ë ¹ ì‹¤í–‰ì—ì„œ â€“ram ì˜µì…˜ì„ ì£¼ë©´ ram ë…¸ë“œë¡œ ì•„ë‹ˆë©´ disk ë…¸ë“œë¡œ ì„¤ì •ëœë‹¤.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server2$ </span>systemctl start rabbitmq-server
<span class="gp">mq-server2$ </span>rabbitmqctl stop_app
<span class="gp">mq-server2$ </span>rabbitmqctl join_cluster --ram rabbit@mq-server1
<span class="gp">mq-server2$ </span>rabbitmqctl start_app
</code></pre>
</div>
<p>ì •ìƒì ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ê°€ êµ¬ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server1$ </span>rabbitmqctl cluster_status
Cluster status of node rabbit@mq-server1 ...
<span class="o">[{</span>nodes,[<span class="o">{</span>disc,[rabbit@mq-server1]<span class="o">}</span>,<span class="o">{</span>ram,[rabbit@mq-server2]<span class="o">}]}</span>,
 <span class="o">{</span>running_nodes,[rabbit@mq-server1,rabbit@mq-server2]<span class="o">}]</span>
...done.
</code></pre>
</div>

<p>ì¶”ê°€ ì°¸ê³ : management plugin ì„¤ì¹˜</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">mq-server1$ </span>rabbitmq-plugins <span class="nb">enable </span>rabbitmq_management
</code></pre>
</div>

    </div>
    <!--<div class="tags">



<a class="label label-default" href="/tags#rabbitmq-ref" title="View posts tagged with &quot;rabbitmq&quot;">rabbitmq</a>


</div>-->
    <!--<div class="post-footer"><a class="back" onclick="history.back();" href="javascript:;">< back</a></div>-->
</article>
<span class="separator"></span>
<div id="disqus_thread"></div>
<script>

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//dev-neoguri.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
</section>
<footer>Â© 2017 Lee Hongchae</footer>
</body>
</html>